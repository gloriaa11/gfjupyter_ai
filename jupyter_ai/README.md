# Jupyter AI Custom

ä¸€ä¸ªå¢å¼ºç‰ˆçš„Jupyter AIæ‰©å±•ï¼Œé›†æˆäº†RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿå’Œå…¬å¸å†…éƒ¨APIæ”¯æŒã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½AIåŠ©æ‰‹**: åŸºäºå…ˆè¿›çš„è¯­è¨€æ¨¡å‹ï¼Œæä¾›æ™ºèƒ½ç¼–ç¨‹è¾…åŠ©
- ğŸ“š **RAGçŸ¥è¯†æ£€ç´¢**: è‡ªåŠ¨æ£€ç´¢å…¬å¸å†…éƒ¨æ–‡æ¡£å’ŒAPIä¿¡æ¯
- ğŸ”§ **å…¬å¸APIé›†æˆ**: æ”¯æŒå…¬å¸å†…éƒ¨APIå‡½æ•°çš„è‡ªåŠ¨å¯¼å…¥å’Œä½¿ç”¨
- ğŸ’» **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒPythonã€SQLã€JavaScriptç­‰å¤šç§ç¼–ç¨‹è¯­è¨€
- ğŸ¯ **ä¸“ä¸šé¢†åŸŸ**: æ·±åº¦æ”¯æŒé‡åŒ–æŠ•èµ„ã€æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸ

## é¡¹ç›®ç»“æ„

```
jupyter_ai/
â”œâ”€â”€ ğŸ“ auth/                    # èº«ä»½è®¤è¯æ¨¡å—
â”‚   â””â”€â”€ identity.py             # ç”¨æˆ·èº«ä»½éªŒè¯å’Œæƒé™ç®¡ç†
â”œâ”€â”€ ğŸ“ completions/             # ä»£ç è¡¥å…¨å’ŒAIå¯¹è¯å¤„ç†
â”‚   â”œâ”€â”€ handlers/               # è¡¥å…¨å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ base.py            # åŸºç¡€å¤„ç†å™¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ default.py         # é»˜è®¤è¡¥å…¨å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ model_mixin.py     # æ¨¡å‹æ··åˆå™¨
â”‚   â””â”€â”€ models.py              # è¡¥å…¨ç›¸å…³æ•°æ®æ¨¡å‹
â”œâ”€â”€ ğŸ“ config/                  # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ config_models.py       # é…ç½®æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ ğŸ“ mcp/                     # MCP (Model Context Protocol) æ”¯æŒ
â”‚   â”œâ”€â”€ mcp_config_loader.py   # MCPé…ç½®åŠ è½½å™¨
â”‚   â””â”€â”€ schema.json            # MCPåè®®æ¨¡å¼å®šä¹‰
â”œâ”€â”€ ğŸ“ personas/                # AIäººæ ¼ç³»ç»Ÿ
â”‚   â”œâ”€â”€ api_knowledge/         # APIçŸ¥è¯†åº“
â”‚   â”‚   â”œâ”€â”€ api_schemas.json   # APIæ¨¡å¼å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ extra/             # é¢å¤–æ–‡æ¡£èµ„æº
â”‚   â”‚   â”œâ”€â”€ faiss_index.bin    # FAISSå‘é‡ç´¢å¼•
â”‚   â”‚   â””â”€â”€ vector_db.pkl      # å‘é‡æ•°æ®åº“
â”‚   â”œâ”€â”€ company_ai/            # å…¬å¸AIäººæ ¼
â”‚   â”‚   â”œâ”€â”€ company_ai_persona.py    # å…¬å¸AIäººæ ¼å®ç°
â”‚   â”‚   â”œâ”€â”€ path_config.py           # è·¯å¾„é…ç½®
â”‚   â”‚   â”œâ”€â”€ prompt_template.py       # æç¤ºè¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ rag_manager.py           # RAGç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ rag_system.py            # RAGæ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿ
â”‚   â”œâ”€â”€ jupyternaut/           # JupyterNautäººæ ¼
â”‚   â”‚   â”œâ”€â”€ jupyternaut.py     # JupyterNautæ ¸å¿ƒå®ç°
â”‚   â”‚   â””â”€â”€ prompt_template.py # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ base_persona.py        # åŸºç¡€äººæ ¼ç±»
â”‚   â”œâ”€â”€ persona_manager.py     # äººæ ¼ç®¡ç†å™¨
â”‚   â””â”€â”€ persona_awareness.py   # äººæ ¼æ„ŸçŸ¥ç³»ç»Ÿ
â”œâ”€â”€ ğŸ“ tools/                   # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ models.py              # å·¥å…·ç›¸å…³æ•°æ®æ¨¡å‹
â”œâ”€â”€ ğŸ“ tests/                   # æµ‹è¯•æ¨¡å—
â”‚   â”œâ”€â”€ completions/           # è¡¥å…¨åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ __snapshots__/         # æµ‹è¯•å¿«ç…§
â”‚   â””â”€â”€ test_*.py              # å„ç§åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ ğŸ“ static/                  # é™æ€èµ„æº
â”‚   â””â”€â”€ jupyternaut.svg        # JupyterNautå›¾æ ‡
â”œâ”€â”€ ğŸ”§ config_manager.py       # é…ç½®ç®¡ç†å™¨
â”œâ”€â”€ ğŸ”§ extension.py            # JupyterLabæ‰©å±•ä¸»å…¥å£
â”œâ”€â”€ ğŸ”§ handlers.py             # äº‹ä»¶å¤„ç†å™¨
â”œâ”€â”€ ğŸ”§ history.py              # å†å²è®°å½•ç®¡ç†
â”œâ”€â”€ ğŸ”§ models.py               # æ ¸å¿ƒæ•°æ®æ¨¡å‹
â”œâ”€â”€ ğŸ“¦ build_whl.py            # æ„å»ºè„šæœ¬
â”œâ”€â”€ ğŸ“¦ setup.py                # å®‰è£…é…ç½®
â”œâ”€â”€ ğŸ“¦ pyproject.toml          # é¡¹ç›®é…ç½®
â””â”€â”€ ğŸ“„ requirements.txt        # ä¾èµ–åŒ…åˆ—è¡¨
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

| æ¨¡å— | åŠŸèƒ½æè¿° |
|------|----------|
| **auth/** | ç”¨æˆ·èº«ä»½è®¤è¯å’Œæƒé™ç®¡ç†ï¼Œç¡®ä¿å®‰å…¨çš„AIè®¿é—® |
| **completions/** | ä»£ç è¡¥å…¨å’ŒAIå¯¹è¯çš„æ ¸å¿ƒå¤„ç†é€»è¾‘ |
| **config/** | ç³»ç»Ÿé…ç½®ç®¡ç†ï¼ŒåŒ…æ‹¬æ¨¡å‹é…ç½®ã€APIé…ç½®ç­‰ |
| **mcp/** | Model Context Protocolæ”¯æŒï¼Œç”¨äºæ¨¡å‹ä¸Šä¸‹æ–‡ç®¡ç† |
| **personas/** | AIäººæ ¼ç³»ç»Ÿï¼ŒåŒ…å«ä¸åŒçš„AIåŠ©æ‰‹è§’è‰²å’ŒçŸ¥è¯†åº“ |
| **tools/** | å·¥å…·æ¨¡å—ï¼Œæä¾›å„ç§è¾…åŠ©åŠŸèƒ½ |
| **tests/** | å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿ä»£ç è´¨é‡ |

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…
pip install -r requirements.txt

# æˆ–è€…ä»æºç å®‰è£…
pip install -e .
```

### 2. ç¯å¢ƒé…ç½®

è®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```bash
# è¯­è¨€æ¨¡å‹é…ç½®
set JUPYTER_AI_MODEL_ID=gpt-4o
set JUPYTER_AI_API_BASE=http://your-api-server/llmapi/v1/chat/completions
set JUPYTER_AI_API_KEY=your-api-key

# åµŒå…¥æ¨¡å‹é…ç½®
set JUPYTER_AI_EMBEDDING_MODEL_ID=Qwen3-Embedding-8B
set JUPYTER_AI_EMBEDDING_API_BASE=http://your-api-server/llmapi/v1/embeddings
set JUPYTER_AI_EMBEDDING_API_KEY=your-api-key

# ç¼–ç è®¾ç½®
set PYTHONIOENCODING=utf-8
set PYTHONUTF8=1
```

### 3. è¿è¡Œç¤ºä¾‹

```bash
# å¯åŠ¨JupyterLab
jupyter lab

# æ‰“å¼€examples.ipynbæŸ¥çœ‹ä½¿ç”¨ç¤ºä¾‹
```

## ä½¿ç”¨æ–¹æ³•

1. å¯åŠ¨JupyterLab
2. åœ¨ä¾§è¾¹æ æ‰¾åˆ°AIåŠ©æ‰‹å›¾æ ‡
3. å¼€å§‹ä¸AIåŠ©æ‰‹å¯¹è¯ï¼Œå®ƒä¼šè‡ªåŠ¨ï¼š
   - æ£€ç´¢ç›¸å…³æ–‡æ¡£ä¿¡æ¯
   - ç”ŸæˆåŒ…å«æ­£ç¡®å¯¼å…¥çš„ä»£ç 
   - æä¾›ä¸“ä¸šçš„æŠ€æœ¯å»ºè®®

## å¼€å‘

### æ„å»ºwhlæ–‡ä»¶

```bash
# å®‰è£…æ„å»ºå·¥å…·
pip install build wheel

# æ„å»ºwhlæ–‡ä»¶
python -m build

# æ„å»ºçš„æ–‡ä»¶åœ¨ dist/ ç›®å½•ä¸‹
```

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_rag_system.py
```

## è®¸å¯è¯

MIT License

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æäº¤Issueã€‚